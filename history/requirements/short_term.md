# 近期诉求（持续更新）

> 维护要求：每次你提出“最近要做什么/优先级变化/卡点”，都更新这里。

## 当前阶段目标（建议你确认/补充）

- **目标**：为 CP2K 计算结果写一个数据处理包（只覆盖恒电荷框架；体系为金属-水界面 + 抗衡离子）
- **优先级**：
  - 先实现：读取常见输出 → 生成可复现的 csv/png → 形成可复用 API/CLI
  - 暂不做：反应物/显式电化学过程的专门分析（未来再扩展）

## 已确认的体系前提（用户声明，值得记录）

- 三基矢**正交**的周期性体系
- 始终包含**金属/水界面**
- 由于周期性边界条件，体系中总会存在**两个表面**（两个界面）

## 近期任务清单（可拆成 issue / TODO）

- **数据读取层（I/O）**
  - 支持读取：`md-*.ener`/`md-pos-*.xyz`/`CHARGE.mulliken`/`md-POTENTIAL-*.cube`
  - 约定：单位、时间步、采样间隔的解析与记录(在`md.inp`中)
- **分析层（Analysis）**
  - 复现/生成：`water_profile.csv/png`（密度与取向 profile）
  - 电势相关：从 Hartree cube 得到沿界面法向的平均电势 profile（含对齐与零点约定）
  - 电荷相关：按元素/分组/分层统计 Mulliken 电荷（明确“输出什么”和“局限性说明”）
- **输出层（Export）**
  - 统一导出：csv（长表/宽表约定）、png（绘图风格）

## 当前已知卡点 / 需要明确的问题（建议写清）

- 界面参考面怎么定义？（top layer / 拟合平面 / COM）
- 法向方向如何自动确定？是否总是 z？
- 电势零点/对齐策略是什么？（真空区、体相水、或平均为 0）
- 水取向的 $\cos\theta$ 定义：采用偶极/HOH 平面法向/OH 向量？

